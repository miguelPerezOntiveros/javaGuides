<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<!-- jQuery -->
	<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>

	<!-- marked -->
	<script src="node_modules/marked/marked.min.js"></script>

	<!-- code-prettyfy -->
	<link href="google-code-prettify/prettify.css" type="text/css" rel="stylesheet" />
	<script type="text/javascript" src="google-code-prettify/prettify.js"></script>

	<!-- d3 -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.js"></script>

	<!-- Bootstrap -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
	
	<link href='https://fonts.googleapis.com/css?family=Amiri' rel='stylesheet' type='text/css'>
	<link href="style.css" rel="stylesheet">

	<title>Document</title>
</head>
<body>
	<div class="row">
		<div id ="leftSide" class="col-md-1"></div>

		<div id="leftMiddle" class="col-md-5"></div>
		<div id="rightMiddle" class="col-md-5"></div>

		<div id ="rightSide" class="col-md-1"></div>
	</div>
	
	<script>

		var sideWidth = $('#leftSide').width();
		var sideHeight = $( window ).height();

		var arrowSide = 100, arrowMargin = 20;
		
		var leftCanvas = d3.select('#leftSide')
			.append('svg')
				.attr('width', sideWidth)
				.attr('height', sideHeight)
			.append('rect')
				.attr('width', arrowSide )
				.attr('height', arrowSide )
				.attr('x', arrowMargin )
				.attr('y', sideHeight/2 - arrowSide/2 )
				.attr('fill', '#ff0000')
				.attr('id', 'leftArrow');

		var rightCanvas = d3.select('#rightSide')
			.append('svg')
				.attr('width', sideWidth)
				.attr('height', sideHeight)
			.append('rect')
				.attr('width', arrowSide )
				.attr('height', arrowSide )
				.attr('x', sideWidth - arrowSide - arrowMargin)
				.attr('y', sideHeight/2 - arrowSide/2 )
				.attr('fill', '#00ff00')
				.attr('id', 'rightArrow');

		$('#leftArrow').click( () =>{
			if(currentPage > 1)
				fillContent(--currentPage);
		});

		$('#rightArrow').click( () =>{
			if(currentPage < 3)
				fillContent(++currentPage);
		});

		var currentPage = 2;
		$('#leftArrow').trigger('click');

		function fillContent(chapter){
			window.done = 0;
			new Promise(function(resolve){
				$.get( 'md/OCA chapter' + ( chapter * 2 - 1 ) + '.md', function( data ) {
					$('#leftMiddle').html(marked(data));
					resolve();
				});
			}).then( () => {
		    	window.done++;
		    	if(done == 2)
		    	{
		    		$( "code" ).each(function() {
					  $( this ).addClass( "prettyprint" );
					}); 
		    		prettyPrint();
		    	}

		    });

			new Promise(function(resolve){
				$.get( 'md/OCA chapter' + ( chapter * 2 ) + '.md', function( data ) {
					$('#rightMiddle').html(marked(data));
					resolve();
				});
			}).then( () => {
		    	window.done++;
		    	if(done == 2)
		    	{
		    		$( "code" ).each(function() {
					  $( this ).addClass( "prettyprint" );
					}); 
		    		prettyPrint();
		    	}

		    });
		}

	</script>
</body>
</html>
